<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <title><{:C("WEB_TITLE")}></title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="/Public/Front/css/bootstrap.min.css" rel="stylesheet">
    <link href="/Public/Front/css/font-awesome.min.css" rel="stylesheet">
    <link href="/Public/Front/css/animate.css" rel="stylesheet">
    <link href="/Public/Front/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="/Public/Front/js/plugins/layui/css/layui.css">
    <style>
        .layui-form-label {
            width: 110px;
            padding: 4px
        }
    </style>
<body>
<div class="wrapper wrapper-content animated">
    <div class="row">
        <div class="col-sm-12">
            <form class="layui-form" action="" id="payaccess">
                <input type="hidden" name="id" value="<{$pa.id}>">
                <div class="layui-form-item">
                    <label class="layui-form-label">中文名称：</label>
                    <div class="layui-input-inline">
                        <input type="text" name="pa[title]" lay-verify="required" autocomplete="off"
                               value="<{$pa.title}>" placeholder="中文名称" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">英文名称：</label>
                    <div class="layui-input-inline">
                        <input type="text" name="pa[code]" lay-verify="required" placeholder="英文名称" value="<{$pa.code}>"
                               autocomplete="off" class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux">注意：即支付接口类名称（不含Controller）</div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">控制器：</label>
                    <div class="layui-input-inline">
                        <select lay-search name="pa[controller_id]" lay-verify="" lay-search="">
                            <option value="">独立控制器</option>
                            <volist name="controller" id="c">
                                <option
                                <if condition="$pa['controller_id'] eq $c[id]">selected</if>
                                value="<{$c.id}>"><{$c.name}> | <{$c.code}></option>
                            </volist>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">网关地址：</label>
                    <div class="layui-input-block">
                        <input type="text" name="pa[gateway]" placeholder="网关地址" autocomplete="off"
                               value="<{$pa.gateway}>" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">页面通知：</label>
                    <div class="layui-input-block">
                        <input type="text" name="pa[pagereturn]" placeholder="页面通知地址" autocomplete="off"
                               value="<{$pa.pagereturn}>" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">服务器通知：</label>
                    <div class="layui-input-block">
                        <input type="text" name="pa[serverreturn]" placeholder="服务器通知地址" autocomplete="off"
                               value="<{$pa.serverreturn}>" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">成本费率：</label>
                    <div class="layui-input-inline">
                        <input type="text" name="pa[rate]" placeholder="成本费率" autocomplete="off" value="<{$pa.rate}>"
                               class="layui-input">
                    </div>
                    <div class="layui-form-small layui-word-aux">单位：‰，例如：千分之三填 0.003</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">防封域名：</label>
                    <div class="layui-input-block">
                        <input type="text" name="pa[unlockdomain]" placeholder="防封域名" value="<{$pa.unlockdomain}>"
                               autocomplete="off" class="layui-input">
                    </div>
                </div>
                <!--<div class="layui-form-item">-->
                    <!--<label class="layui-form-label">分类：</label>-->
                    <!--<div class="layui-input-inline">-->
                        <!--<select lay-search name="pa[paytype]" lay-verify="required" lay-search="">-->
                            <!--<option value="">直接选择或搜索选择</option>-->
                            <!--<volist name="paytypes" id="b">-->
                                <!--<option-->
                                <!--<if condition="$pa[paytype] eq $b[id]">selected</if>-->
                                <!--value="<{$b.id}>"><{$b.name}></option>-->
                            <!--</volist>-->
                        <!--</select>-->
                    <!--</div>-->
                <!--</div>-->
                <div class="layui-form-item">
                    <label class="layui-form-label">支付产品：</label>
                    <div class="layui-input-inline">
                        <select lay-search name="pa[payment_product_id]" lay-verify="required" lay-search="">
                            <option value="">直接选择或搜索选择</option>
                            <volist name="payment_product" id="pp">
                                <option
                                <if condition="$pa['payment_product_id'] eq $pp[id]">selected</if>
                                value="<{$pp.id}>"><{$pp.id}>   <{$pp.name}></option>
                            </volist>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">状态：</label>
                    <div class="layui-input-block">
                        <input type="radio" name="pa[status]"
                        <if condition="$pa[status] eq 1">checked</if>
                        value="1" title="开启" checked="">
                        <input type="radio" name="pa[status]"
                        <if condition="$pa[status] eq 0">checked</if>
                        value="0" title="关闭">
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit="submit" lay-filter="add">提交保存</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="/Public/Front/js/jquery.min.js"></script>
<script src="/Public/Front/js/bootstrap.min.js"></script>
<script src="/Public/Front/js/plugins/peity/jquery.peity.min.js"></script>
<script src="/Public/Front/js/content.js"></script>
<script src="/Public/Front/js/plugins/layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    layui.use(['layer', 'form'], function () {
        var form = layui.form
            , layer = layui.layer;

        //监听提交
        form.on('submit(add)', function (data) {
            $.ajax({
                url: "<{:U('Channel/saveEditSupplier')}>",
                type: "post",
                data: $('#payaccess').serialize(),
                success: function (res) {
                    if (res.status) {
                        layer.alert("编辑成功", {icon: 6}, function () {
                            parent.location.reload();
                            var index = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(index);
                        });
                    } else {
                        layer.msg(res.msg ? res.msg : "操作失败", {icon: 5});
                        return false;
                    }
                }
            });
            return false;
        });
    });
</script>
<!--统计代码，可删除-->
</body>
</html>
