<?php/** * Created by PhpStorm. * User: gaoxi * Date: 2017-04-02 * Time: 23:01 */namespace Admin\Controller;use Think\Page;/** * 日志管理控制器 * Class OrderController * @package Admin\Controller */class LogController extends BaseController{    public function __construct()    {        parent::__construct();    }    /**     * 订单列表     */    public function index()    {        $where    = array();        $memberid = I("request.memberid",0,'intval');        if ($memberid) {            $where['user_id'] = array('eq', $memberid-10000);        }        $this->assign('memberid', $memberid);        $username = I("request.username", '', 'trim,string,strip_tags,htmlspecialchars');        if ($username) {            $where['username'] = $username;        }        $this->assign('username', $username);        $type = I("request.type", 0, 'intval');        if ($type != "") {            $where['type'] = array('eq', $type);        }        $this->assign('type', $type);        $create_at = urldecode(I("request.createtime", '', 'trim,string,strip_tags,htmlspecialchars'));        if ($create_at) {            list($cstime, $cetime)  = explode('|', $create_at);            $where['create_at'] = ['between', [$cstime, $cetime]];        }        $this->assign('createtime', $create_at);        $count = M('user_log')->where($where)->count();        $size = 15;        $rows = I('get.rows', $size, 'intval');        if (!$rows) {            $rows = $size;        }        $page = new Page($count, $rows);        $list = M('user_log')            ->where($where)            ->limit($page->firstRow . ',' . $page->listRows)            ->order('id desc')            ->select();        $this->assign('rows', $rows);        $this->assign("list", $list);        $this->assign('page', $page->show());        $this->display();    }}