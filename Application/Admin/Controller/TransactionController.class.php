<?php/** * Created by PhpStorm. * User: gaoxi * Date: 2017-04-02 * Time: 23:01 */namespace Admin\Controller;/** * 交易设置控制器 * Class OrderController * @package Admin\Controller */class TransactionController extends BaseController{    /**     * 交易设置     */    public function index()    {        $info = M('UserRiskcontrolConfig')->where(['id' => 1, 'is_system' => 1])->find();        $this->assign('info', $info);        $this->display();    }    /**     * 修改添加规则     */    public function editAddConfig()    {        $data = I('post.data', '');        $result = 0;        if (IS_POST) {                        if ($data['start_time'] != 0 || $data['end_time'] != 0) {                if ($data['start_time'] >= $data['end_time']) {                    $this->ajaxReturn(['status' => 0, 'msg' => '交易结束时间不能小于开始时间！']);                }            }            if ($data['max_money'] != 0 && $data['min_money'] != 0) {                if ($data['min_money'] >= $data['max_money']) {                    $this->ajaxReturn(['status' => 0, 'msg' => '最大交易金额不能小于或等于最小金额！']);                }            }            $data['domain'] = trim($data['domain']);            if ($data['id']) {                $data['add_time'] = time();                $result           = M('UserRiskcontrolConfig')->where(['id' => $data['id']])->save($data);            } else {                unset($data['id']);                $data['edit_time'] = time();                $result            = M('UserRiskcontrolConfig')->add($data);            }        }        $this->ajaxReturn(['status' => $result]);    }    /**     * 用户的交易配置     */    public function userConfig()    {        $uid  = I('get.uid', '');        $info = M('UserRiskcontrolConfig')->where(['user_id' => $uid])->find();        $this->assign('info', $info);        $this->display();    }}